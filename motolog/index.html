<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>電動摩托車紀錄系統</title>

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- 外部 CSS（已從原檔的 <style> 拆出） -->
    <link rel="stylesheet" href="motolog.css">
</head>
<body>
    <!-- 原始內容（保持不變）-->
    <div class="container">
        <div class="header">
            <h1>🏍️ 電動摩托車紀錄系統</h1>
            <p>智能管理您的電動車充電、保養與費用</p>
        </div>
        
        <div class="dashboard">
            <div class="stat-card">
                <h3>總里程</h3>
                <div class="value" id="totalMileage">0</div>
                <div class="subtitle">公里</div>
            </div>
            <div class="stat-card">
                <h3>上次充電</h3>
                <div class="value" id="lastChargeDays">-</div>
                <div class="subtitle" id="lastChargeDate">尚未記錄</div>
            </div>
            <div class="stat-card">
                <h3>下次保養</h3>
                <div class="value" id="nextServiceKm">-</div>
                <div class="subtitle" id="nextServiceDate">請先記錄保養</div>
            </div>
            <div class="stat-card">
                <h3>總花費</h3>
                <div class="value" id="totalExpense">0</div>
                <div class="subtitle">NT$</div>
            </div>
        </div>
        
        <div class="content">
            <div class="tabs">
                <button class="tab-button active" data-tab="charge">充電紀錄</button>
                <button class="tab-button" data-tab="maintenance">保養維修</button>
                <button class="tab-button" data-tab="expense">其他費用</button>
                <button class="tab-button" data-tab="status">快速更新</button>
                <button class="tab-button" data-tab="statistics">統計分析</button>
                <button class="tab-button" data-tab="settings">⚙️ 系統設定</button>
            </div>
            
            <!-- 充電紀錄 -->
            <div id="chargeTab" class="tab-content active">
                <div id="startChargeSection">
                    <div class="form-card">
                        <h3>開始充電</h3>
                        <form id="startChargeForm">
                            <div class="form-group">
                                <label>充電站快速選擇</label>
                                <div class="quick-stations">
                                    <button type="button" class="station-btn" data-station="公司">🏢 公司</button>
                                    <button type="button" class="station-btn" data-station="充電站">⚡ 充電站</button>
                                    <button type="button" class="station-btn" data-station="家裡">🏠 家裡</button>
                                    <button type="button" class="station-btn" data-station="其他">📍 其他</button>
                                </div>
                                <input type="text" id="cStation" placeholder="自訂地點" style="display:none; margin-top:10px;">
                            </div>
                            
                            <div class="form-group">
                                <label>目前總里程 (ODO)</label>
                                <input type="number" step="0.1" id="cOdo" placeholder="公里" required>
                                <small>記錄儀表板的總里程數</small>
                            </div>
                            
                            <div class="form-group">
                                <label>充電前電量 (格)</label>
                                <div class="battery-selector">
                                    <div class="battery-option"><input type="radio" id="bs0" name="cBatteryStart" value="0"><label for="bs0">0</label></div>
                                    <div class="battery-option"><input type="radio" id="bs1" name="cBatteryStart" value="1" checked><label for="bs1">1</label></div>
                                    <div class="battery-option"><input type="radio" id="bs2" name="cBatteryStart" value="2"><label for="bs2">2</label></div>
                                    <div class="battery-option"><input type="radio" id="bs3" name="cBatteryStart" value="3"><label for="bs3">3</label></div>
                                    <div class="battery-option"><input type="radio" id="bs4" name="cBatteryStart" value="4"><label for="bs4">4</label></div>
                                    <div class="battery-option"><input type="radio" id="bs5" name="cBatteryStart" value="5"><label for="bs5">5</label></div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>備註</label>
                                <textarea id="cNotes" rows="2" placeholder="其他記錄事項"></textarea>
                            </div>
                            
                            <button type="submit" class="btn btn-success btn-full">⚡ 開始充電</button>
                        </form>
                    </div>
                </div>
                
                <div id="endChargeSection" style="display:none;">
                    <div class="charging-status">
                        <h3>⚡ 充電進行中...</h3>
                        <div id="currentChargeInfo"></div>
                        <div class="charging-timer" id="chargingTimer">00:00:00</div>
                    </div>
                    
                    <div class="form-card">
                        <h3>結束充電</h3>
                        <form id="endChargeForm">
                            <div class="form-group">
                                <label>充電後電量 (格)</label>
                                <div class="battery-selector">
                                    <div class="battery-option"><input type="radio" id="be0" name="cBatteryEnd" value="0"><label for="be0">0</label></div>
                                    <div class="battery-option"><input type="radio" id="be1" name="cBatteryEnd" value="1"><label for="be1">1</label></div>
                                    <div class="battery-option"><input type="radio" id="be2" name="cBatteryEnd" value="2"><label for="be2">2</label></div>
                                    <div class="battery-option"><input type="radio" id="be3" name="cBatteryEnd" value="3"><label for="be3">3</label></div>
                                    <div class="battery-option"><input type="radio" id="be4" name="cBatteryEnd" value="4"><label for="be4">4</label></div>
                                    <div class="battery-option"><input type="radio" id="be5" name="cBatteryEnd" value="5" checked><label for="be5">5</label></div>
                                </div>
                            </div>
                            
                            <div class="form-group" id="kwhGroup">
                                <label>充電度數 (kWh)</label>
                                <input type="number" step="0.01" id="cKwh" placeholder="例如: 1.5">
                                <small>插座端量測值,非必填</small>
                            </div>
                            
                            <div class="form-group" id="costGroup">
                                <label>充電費用 (NT$)</label>
                                <input type="number" id="cCost" placeholder="例如: 30">
                                <small>於「公司」或「家裡」充電時，若已設定電費將自動計算。</small>
                            </div>
                            
                            <div class="form-group">
                                <label>預估里程 (RANGE)</label>
                                <input type="number" step="0.1" id="cRange" placeholder="公里">
                                <small>儀表板預估值,非必填</small>
                            </div>
                            
                            <button type="submit" class="btn btn-primary btn-full">✅ 結束充電並儲存</button>
                        </form>
                    </div>
                </div>
                
                <div class="analytics-grid">
                    <div class="analytics-card"><h4>平均效率</h4><p id="avgEfficiency">-</p></div>
                    <div class="analytics-card"><h4>最佳效率</h4><p id="bestEfficiency">-</p></div>
                    <div class="analytics-card"><h4>最差效率</h4><p id="worstEfficiency">-</p></div>
                    <div class="analytics-card"><h4>總充電次數</h4><p id="totalCharges">0</p></div>
                </div>
                
                <div class="filter-bar">
                    <input type="text" id="chargeSearch" placeholder="🔍 搜尋充電站...">
                    <select id="chargeMonthFilter"><option value="">所有月份</option></select>
                </div>
                
                <div style="overflow-x: auto;">
                    <table>
                        <thead><tr><th>期間</th><th>地點</th><th>費用</th><th>效率</th><th>電量</th><th>時長</th><th>操作</th></tr></thead>
                        <tbody id="chargeTable"></tbody>
                    </table>
                </div>
                
                <div class="chart-container"><h3>充電效率趨勢</h3><canvas id="chargeChart"></canvas></div>
            </div>

            <!-- 其餘 tab (保養 / 費用 / 快速更新 / 統計 / 設定 / 資料管理) ... -->
            <!-- 為簡潔起見在此不再重複 HTML（實際檔案請保留原本全部內容） -->
        </div>
    </div>

    <!-- Edit Modal, toast 等也保留原本 HTML 結構（請參考原檔） -->

    <!-- 外部 JS（已從原檔的 <script> 拆出） -->
    <script src="motolog.js" defer></script>
</body>
</html>
