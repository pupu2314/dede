<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>加班費計算機</title>
    <meta name="theme-color" content="#007bff"/>
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="加班費計算機">
    
    <!-- 截圖功能 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <link rel="stylesheet" href="work.css">
</head>
<body>
    <div class="container main-layout">
        <h1 class="app-title">加班費計算機 <small>v2.8.6</small></h1>
        
        <!-- 未同步提醒條 -->
        <div id="unsynced-alert" class="sync-alert-bar" style="display: none;">
            <span>⚠️ 您有尚未同步的資料</span>
            <button id="quick-sync-btn" class="btn-small btn-warning">立即同步</button>
        </div>

        <!-- 分頁導航列 -->
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('punch')">加班記錄</button>
            <button class="tab-btn" onclick="switchTab('leave')">特休/補休</button>
            <button class="tab-btn" onclick="switchTab('settings')">系統設定</button>
        </div>

        <!-- 1. 加班紀錄分頁 -->
        <div id="punch" class="tab-content active">
            <div class="card add-record-section">
                <div class="input-group-row">
                    <div class="input-item">
                        <label for="work-date">日期</label>
                        <input type="date" id="work-date">
                    </div>
                    <div class="input-item">
                        <label for="day-type">類別</label>
                        <select id="day-type">
                            <option value="weekday">平日</option>
                            <option value="restday">休息日</option>
                            <option value="holiday">例假日</option>
                        </select>
                    </div>
                </div>
                <div class="input-group-row">
                    <div class="input-item">
                        <label for="time-start">開始</label>
                        <input type="time" id="time-start" value="18:00">
                    </div>
                    <div class="input-item">
                        <label for="time-end">結束</label>
                        <input type="time" id="time-end">
                    </div>
                </div>
                <button id="add-record" class="btn-primary">新增紀錄</button>
            </div>

            <div class="card summary-card">
                <div class="filter-row">
                    <input type="month" id="month-filter">
                </div>
                <div class="stats-row">
                    <div class="stat-item">
                        <span>總時數</span>
                        <strong id="total-overtime">0</strong>
                    </div>
                    <div class="stat-item">
                        <span>預估加班費</span>
                        <strong id="total-pay">0</strong>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <table id="record-table">
                    <thead>
                        <tr>
                            <th>日期</th>
                            <th>時間</th>
                            <th>時數</th>
                            <th>金額</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- 2. 特休分頁 -->
        <div id="leave" class="tab-content">
            <div class="card">
                <h3>特休統計</h3>
                <div id="leave-info-display" class="leave-summary-info">
                    請先在設定中填寫「特休年度額度」
                </div>
            </div>

            <div class="card">
                <h3>新增請假紀錄</h3>
                <div class="input-group-row">
                    <div class="input-item">
                        <label for="leave-date">日期</label>
                        <input type="date" id="leave-date">
                    </div>
                    <div class="input-item">
                        <label for="leave-hours">時數</label>
                        <input type="number" id="leave-hours" placeholder="小時">
                    </div>
                </div>
                <div class="input-group-row">
                    <div class="input-item">
                        <label for="leave-type">類別</label>
                        <select id="leave-type">
                            <option value="annual">特休</option>
                            <option value="compensatory">補休</option>
                            <option value="other">其他</option>
                        </select>
                    </div>
                    <div class="input-item">
                        <label for="leave-note">備註</label>
                        <input type="text" id="leave-note" placeholder="例如：去銀行">
                    </div>
                </div>
                <button id="add-leave" class="btn-primary">儲存紀錄</button>
            </div>

            <div class="table-container">
                <table id="leave-list">
                    <thead>
                        <tr>
                            <th>日期</th>
                            <th>時數</th>
                            <th>備註</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- 3. 設定分頁 -->
        <div id="settings" class="tab-content">
            <div class="card">
                <h3>薪資設定</h3>
                <div class="input-item">
                    <label>月薪 (用於計算時薪)</label>
                    <input type="number" id="salary" placeholder="輸入月薪">
                </div>
                <div class="input-item">
                    <label>每小時薪資 (加班費基準)</label>
                    <input type="number" id="hourly-rate" placeholder="或手動輸入時薪">
                </div>
                
                <h3 style="margin-top: 1.5rem;">特休設定</h3>
                <div class="input-item">
                    <label>到職日期</label>
                    <input type="date" id="join-date">
                </div>
                <div class="input-item">
                    <label>今年特休總額度 (天)</label>
                    <input type="number" id="annual-leave-base" placeholder="例如：7" step="0.5">
                </div>
                
                <button id="save-settings" class="btn-primary" style="margin-top: 1rem;">儲存所有設定</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast" class="toast"></div>

    <script src="work.js"></script>
</body>
</html>
