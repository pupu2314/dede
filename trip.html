<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›ªèˆåŒ—é™¸ï¼š2025 å†¬å­£æ—…ç¨‹åŠ©æ‰‹</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; color: #334155; }
        
        /* Smooth Tab Transitions */
        .tab-content { display: none; animation: fadeIn 0.4s ease-in-out; }
        .tab-content.active { display: block; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Checklist Styles */
        .checklist-item { transition: all 0.2s; border: 1px solid transparent; }
        .checklist-item:hover { background-color: #f1f5f9; }
        .checklist-item.checked .check-box { background-color: #0ea5e9; border-color: #0ea5e9; }
        .checklist-item.checked .check-icon { opacity: 1; transform: scale(1); }
        .checklist-item.checked .item-text { text-decoration: line-through; color: #94a3b8; }
        .checklist-item.checked { background-color: #f8fafc; border-color: #e2e8f0; opacity: 0.7; }
        
        /* Image Containers */
        .illustration-container {
            background: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.75rem;
            overflow: hidden;
            border: 1px solid #cbd5e1;
        }
        
        /* Badge Styles */
        .badge { display: inline-flex; align-items: center; padding: 0.125rem 0.5rem; border-radius: 9999px; font-size: 0.7rem; font-weight: 600; margin-right: 0.25rem; }
        .badge-blue { background-color: #e0f2fe; color: #0369a1; }
        .badge-amber { background-color: #fef3c7; color: #b45309; }
        .badge-rose { background-color: #ffe4e6; color: #be123c; }
        .badge-emerald { background-color: #d1fae5; color: #047857; }
        .badge-violet { background-color: #ede9fe; color: #6d28d9; }
        .badge-red { background-color: #fee2e2; color: #991b1b; }
        
        /* Important Info Card */
        .info-card { background: linear-gradient(to right, #fff, #f8fafc); border-left: 4px solid #3b82f6; }
    </style>
</head>
<body class="antialiased pb-24 md:pb-12 bg-slate-50">

    <!-- Desktop Action Bar -->
    <div class="fixed top-4 right-4 z-50 flex gap-2 hidden md:flex">
        <button onclick="downloadPage()" class="bg-slate-800 hover:bg-slate-700 text-white px-5 py-2.5 rounded-full text-sm font-bold flex items-center shadow-lg transition transform hover:-translate-y-0.5 border border-slate-600">
            <span class="material-symbols-outlined text-[20px] mr-2">download</span> åŒ¯å‡ºç¶²é  (å¯é›¢ç·šä½¿ç”¨)
        </button>
    </div>

    <!-- Mobile Bottom Nav -->
    <nav class="md:hidden fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur border-t border-slate-200 z-40 flex justify-around p-2 pb-safe shadow-[0_-4px_10px_-1px_rgba(0,0,0,0.05)]">
        <button id="nav-packing" onclick="switchTab('packing')" class="nav-btn flex flex-col items-center text-sky-600 w-full">
            <span class="material-symbols-outlined">backpack</span>
            <span class="text-[10px] font-bold mt-1">è¡Œæ</span>
        </button>
        <button id="nav-itinerary" onclick="switchTab('itinerary')" class="nav-btn flex flex-col items-center text-slate-400 w-full">
            <span class="material-symbols-outlined">styler</span>
            <span class="text-[10px] font-bold mt-1">è¡Œç¨‹</span>
        </button>
        <button id="nav-map" onclick="switchTab('map')" class="nav-btn flex flex-col items-center text-slate-400 w-full">
            <span class="material-symbols-outlined">map</span>
            <span class="text-[10px] font-bold mt-1">åœ°åœ–</span>
        </button>
        <button onclick="downloadPage()" class="nav-btn flex flex-col items-center text-slate-800 w-full border-l border-slate-100 bg-slate-50">
            <span class="material-symbols-outlined">save</span>
            <span class="text-[10px] font-bold mt-1">å­˜æª”</span>
        </button>
    </nav>

    <!-- Header -->
    <header class="relative h-48 md:h-60 overflow-hidden bg-slate-900 flex items-center justify-center">
        <!-- Header Image Replacement -->
        <img src="head_img.png" class="absolute inset-0 w-full h-full object-cover opacity-80" alt="Header Image" onerror="this.style.display='none'; this.parentElement.style.backgroundColor='#1e293b'">
        
        <div class="relative z-10 text-center px-4">
            <h1 class="text-3xl md:text-5xl font-bold text-white mb-2 tracking-wider drop-shadow-lg">é›ªèˆåŒ—é™¸</h1>
            <div class="inline-flex items-center bg-white/10 backdrop-blur-md px-4 py-1.5 rounded-full border border-white/20 mt-2">
                <span class="material-symbols-outlined text-sky-300 text-sm mr-2">flight</span>
                <span class="text-sky-100 text-sm font-mono tracking-widest">2025.12.24 - 12.28</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 py-6 -mt-8 relative z-20">
        
        <!-- Desktop Tabs -->
        <div class="hidden md:flex bg-white rounded-xl shadow-sm border border-slate-200 p-1.5 mb-8">
            <button id="tab-packing" onclick="switchTab('packing')" class="tab-btn flex-1 py-3 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition bg-sky-50 text-sky-600 shadow-sm ring-1 ring-slate-200">
                <span class="material-symbols-outlined">backpack</span> æ™ºæ…§è¡Œææ¸…å–®
            </button>
            <button id="tab-itinerary" onclick="switchTab('itinerary')" class="tab-btn flex-1 py-3 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition text-slate-500 hover:bg-slate-50">
                <span class="material-symbols-outlined">styler</span> äº”æ—¥è¡Œç¨‹ & è¯çµ¡
            </button>
            <button id="tab-map" onclick="switchTab('map')" class="tab-btn flex-1 py-3 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition text-slate-500 hover:bg-slate-50">
                <span class="material-symbols-outlined">map</span> æ™¯é»å°èˆªåœ°åœ–
            </button>
        </div>

        <!-- TAB 1: PACKING LIST -->
        <div id="content-packing" class="tab-content active">
            
            <!-- Rules Alert -->
            <div class="bg-white border-l-4 border-rose-500 p-5 rounded-xl mb-6 shadow-sm flex flex-col md:flex-row gap-4 items-start">
                <div class="bg-rose-50 p-3 rounded-full flex-shrink-0">
                    <span class="material-symbols-outlined text-rose-500 text-2xl">no_backpack</span>
                </div>
                <div class="flex-1">
                    <h3 class="text-rose-800 font-bold text-base mb-2">å°ç™½å¿…çœ‹ï¼šé£›å®‰ç¦é‹è¦å‰‡</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <div class="flex items-center text-sm text-slate-700 bg-rose-50 px-3 py-2 rounded-lg border border-rose-100">
                            <span class="material-symbols-outlined text-rose-500 mr-2">battery_charging_full</span>
                            <span><strong>è¡Œå‹•é›»æº/è—ç‰™è€³æ©Ÿ</strong><br>ğŸ‘‰ å‹™å¿…<span class="text-rose-600 font-bold">éš¨èº«å¸¶ä¸Šé£›æ©Ÿ</span></span>
                        </div>
                        <div class="flex items-center text-sm text-slate-700 bg-rose-50 px-3 py-2 rounded-lg border border-rose-100">
                            <span class="material-symbols-outlined text-rose-500 mr-2">local_fire_department</span>
                            <span><strong>æ‰“ç«æ©Ÿ (é™1å€‹)</strong><br>ğŸ‘‰ å‹™å¿…<span class="text-rose-600 font-bold">éš¨èº« (åš´ç¦æ‰˜é‹)</span></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-6">
                <!-- Carry On -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col h-full">
                    <div class="bg-sky-600 px-5 py-3 flex justify-between items-center text-white">
                        <div class="flex items-center gap-2 font-bold text-lg">
                            <span class="material-symbols-outlined">flight_takeoff</span> éš¨èº«èƒŒåŒ…
                        </div>
                        <span class="text-[11px] bg-white/20 backdrop-blur px-2 py-1 rounded font-bold">7 å…¬æ–¤ä»¥å…§</span>
                    </div>
                    <div id="list-carry" class="p-3 space-y-1 flex-1">
                        <!-- JS Rendered Items -->
                    </div>
                </div>

                <!-- Checked -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col h-full">
                    <div class="bg-indigo-600 px-5 py-3 flex justify-between items-center text-white">
                        <div class="flex items-center gap-2 font-bold text-lg">
                            <span class="material-symbols-outlined">luggage</span> æ‰˜é‹è¡Œæã€‚
                        </div>
                        <span class="text-[11px] bg-white/20 backdrop-blur px-2 py-1 rounded font-bold">23 å…¬æ–¤ä»¥å…§</span>
                    </div>
                    <div id="list-checked" class="p-3 space-y-1">
                         <!-- JS Rendered Items -->
                    </div>
                    
                    <!-- Medicine Area -->
                    <div class="mx-3 mb-3 mt-auto bg-amber-50 rounded-lg border border-amber-100 p-3">
                        <h4 class="text-xs font-bold text-amber-800 mb-2 flex items-center border-b border-amber-200 pb-1">
                            <span class="material-symbols-outlined text-[16px] mr-1">medical_services</span> è—¥å“ä¿å¥ (å»ºè­°æ‰˜é‹)
                        </h4>
                        <div id="list-meds" class="space-y-1">
                             <!-- JS Rendered Items -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 2: ITINERARY (Updated based on PDF) -->
        <div id="content-itinerary" class="tab-content">
            <div class="space-y-6">

                <!-- EMERGENCY INFO (NEW!) -->
                <div class="bg-white rounded-2xl shadow-lg border-l-4 border-red-500 overflow-hidden">
                    <div class="bg-red-50 px-6 py-4 border-b border-red-100 flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <span class="material-symbols-outlined text-red-600 text-2xl">sos</span>
                            <h2 class="font-bold text-lg text-red-800">ç·Šæ€¥æ•‘æ´å¡</h2>
                        </div>
                        <a href="https://www.jnto.go.jp/safety-tips/eng/app.html" target="_blank" class="text-xs font-bold text-red-600 bg-white border border-red-200 px-3 py-1.5 rounded-full hover:bg-red-50 flex items-center">
                            <span class="material-symbols-outlined text-sm mr-1">download</span> ä¸‹è¼‰ Safety Tips
                        </a>
                    </div>
                    <div class="p-6 grid md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-xs font-bold text-slate-400 mb-2 uppercase tracking-wide">ç·Šæ€¥è¯çµ¡é›»è©±</h3>
                            <ul class="space-y-3">
                                <li class="flex items-center justify-between">
                                    <span class="font-bold text-slate-700">æ—…å¤–åœ‹äººæ€¥é›£æ•‘åŠ©</span>
                                    <a href="tel:+81332807917" class="font-mono text-red-600 font-bold bg-red-50 px-2 py-1 rounded hover:bg-red-100">+81-3-3280-7917</a>
                                </li>
                                <li class="flex items-center justify-between">
                                    <span class="font-bold text-slate-700">æ—¥æœ¬å ±è­¦ (Police)</span>
                                    <a href="tel:110" class="font-mono text-slate-800 font-bold bg-slate-100 px-2 py-1 rounded">110</a>
                                </li>
                                <li class="flex items-center justify-between">
                                    <span class="font-bold text-slate-700">æ—¥æœ¬æ•‘è­·/ç«è­¦</span>
                                    <a href="tel:119" class="font-mono text-slate-800 font-bold bg-slate-100 px-2 py-1 rounded">119</a>
                                </li>
                            </ul>
                        </div>
                        <div>
                            <h3 class="text-xs font-bold text-slate-400 mb-2 uppercase tracking-wide">æ—…è¡Œåœ˜è¯ç¹«</h3>
                            <div class="space-y-2">
                                <div class="flex items-center justify-between p-2 bg-slate-50 rounded border border-slate-100">
                                    <span class="text-slate-600 font-bold text-sm">é ˜éšŠï¼šæ›¾å¦‚è¼ å…ˆç”Ÿ</span>
                                    <a href="tel:0937939303" class="text-blue-600 font-mono text-sm hover:underline">0937-939-303</a>
                                </div>
                                <div class="flex items-center justify-between p-2 bg-slate-50 rounded border border-slate-100">
                                    <span class="text-slate-600 font-bold text-sm">é€æ©Ÿï¼šå°è•­</span>
                                    <a href="tel:0988152034" class="text-blue-600 font-mono text-sm hover:underline">0988-152-034</a>
                                </div>
                                <div class="text-[10px] text-slate-400 text-right">é ˜éšŠæ—¥æœ¬è™Ÿç¢¼ï¼š+81-90-3146-6857</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- MEETING INFO -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 flex items-center gap-4">
                    <div class="bg-amber-100 text-amber-600 p-3 rounded-full">
                        <span class="material-symbols-outlined">meeting_room</span>
                    </div>
                    <div>
                        <div class="text-xs text-slate-500 font-bold">é›†åˆæ™‚é–“èˆ‡åœ°é»</div>
                        <div class="text-lg font-bold text-slate-800">12/24 (ä¸‰) 05:35 æ¡ƒåœ’äºŒèˆª 6è™Ÿæ«ƒæª¯</div>
                    </div>
                </div>
                
                <!-- Day 1 -->
                <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-200 flex flex-col md:flex-row gap-6">
                    <div class="w-full md:w-1/3 illustration-container h-48 md:h-auto relative overflow-hidden group">
                        <img src="Day 1_img.png" class="w-full h-full object-cover transition group-hover:scale-105 duration-700" alt="Day 1 Image" onerror="this.style.opacity='0.5'">
                    </div>
                    <div class="flex-1">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h3 class="font-bold text-xl text-slate-800">Day 1: åå¤å±‹ã€æƒ é‚£å³½ã€é¦¬ç± å®¿</h3>
                                <div class="flex gap-2 mt-1">
                                    <span class="badge badge-blue">âœˆï¸ CI154 (07:35-11:05)</span>
                                    <span class="badge badge-amber">æ±Ÿæˆ¶é¢¨æƒ…</span>
                                </div>
                            </div>
                            <span class="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded font-mono border border-slate-200">12/24</span>
                        </div>
                        <p class="text-sm text-slate-600 mb-4 leading-relaxed">
                            åˆé¤äº«ç”¨åå¤å±‹åç‰©ã€Œç‚¸è¦é£¯ç³°ã€ã€‚æŠµé”å¾Œå‰å¾€<span class="font-bold text-slate-800">æƒ é‚£å³½å±•æœ›å°</span>ï¼Œæ¬£è³å—å¤§è‡ªç„¶ä¾µè•è€Œæˆçš„æ–·å´–çµ•å£ã€‚æ¥è‘—æ¼«æ­¥æ–¼å¤è€çš„é©›ç«™<span class="font-bold text-slate-800">é¦¬ç± å®¿</span>ï¼Œæ„Ÿå—æ±Ÿæˆ¶æ™‚ä»£çš„ç¹æ¦®æ™¯è±¡ã€‚
                        </p>
                        <!-- Wear -->
                        <div class="bg-slate-50 p-3 rounded-lg text-sm text-slate-600 border border-slate-200 flex gap-3 mb-3">
                            <div class="bg-white p-1.5 rounded-full h-8 w-8 flex items-center justify-center text-lg shadow-sm border border-slate-100">ğŸ‘”</div>
                            <div>
                                <strong class="text-slate-800 block text-xs">ç©¿æ­ï¼šèˆ’é©æ´‹è”¥å¼</strong>
                                æ©Ÿä¸Šèˆ‡è»Šå…§æœ‰æš–æ°£ã€‚å»ºè­°å…§ç©¿è–„é•·è¢–ï¼Œå¤–åŠ å¥½è„«çš„ä¿æš–å¤–å¥—ã€‚
                            </div>
                        </div>
                        <!-- Hotel -->
                        <div class="flex items-start text-xs text-slate-500 bg-slate-50 p-2 rounded border border-slate-100">
                            <span class="material-symbols-outlined text-[16px] mr-1.5 text-indigo-400">hotel</span>
                            <span><strong>ä½å®¿ï¼š</strong>è“¼ç§‘ RESORT (Tateshina Resort) <br>TEL: +81-0266-67-2626</span>
                        </div>
                    </div>
                </div>

                <!-- Day 2 -->
                <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-200 flex flex-col md:flex-row gap-6">
                    <div class="w-full md:w-1/3 illustration-container h-48 md:h-auto relative overflow-hidden group">
                        <img src="Day 2_img.png" class="w-full h-full object-cover transition group-hover:scale-105 duration-700" alt="Day 2 Image" onerror="this.style.opacity='0.5'">
                    </div>
                    <div class="flex-1">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h3 class="font-bold text-xl text-slate-800">Day 2: é›ªçŒ´ã€å°å¸ƒæ–½ã€å–„å…‰å¯º</h3>
                                <div class="flex gap-2 mt-1">
                                    <span class="badge badge-rose">âš ï¸ æ­¥è¡Œ2KM</span>
                                    <span class="badge badge-emerald">åœ‹å¯¶</span>
                                </div>
                            </div>
                            <span class="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded font-mono border border-slate-200">12/25</span>
                        </div>
                        <p class="text-sm text-slate-600 mb-4 leading-relaxed">
                            <span class="text-rose-500 font-bold">é«”åŠ›æŒ‘æˆ°ï¼</span>æ­¥è¡Œä¾†å›ç´„4å…¬é‡Œé›ªè·¯å‰å¾€<span class="font-bold text-slate-800">åœ°ç„è°·é‡çŒ¿å…¬è‹‘</span>ï¼Œçœ‹é›ªçŒ´æ³¡æ¹¯ã€‚æ¥è‘—åˆ°æ —å­ä¹‹é„‰<span class="font-bold text-slate-800">å°å¸ƒæ–½</span>äº«ç”¨æ —å­é£¯ï¼Œæ¼«æ­¥åŒ—é½‹é¤¨å‘¨é‚Šã€‚ä¸‹åˆåƒæ‹œä¸€ç”Ÿå¿…å»ä¸€æ¬¡çš„åœ‹å¯¶<span class="font-bold text-slate-800">å–„å…‰å¯º</span>ã€‚
                        </p>
                        <!-- Wear -->
                        <div class="bg-rose-50 p-3 rounded-lg text-sm text-rose-800 border border-rose-100 flex gap-3 mb-3">
                            <div class="bg-white p-1.5 rounded-full h-8 w-8 flex items-center justify-center text-lg shadow-sm border border-rose-100">ğŸ¥¾</div>
                            <div>
                                <strong class="text-rose-700 block text-xs">ç©¿æ­ï¼šé˜²æ»‘é˜²æ°´ (æœ€é‡è¦)</strong>
                                é›ªåœ°æ¿•æ»‘ï¼Œåš´ç¦å¹³åº•å¸ƒé‹ï¼ä¸€å®šè¦ç©¿æ·±é½’ç—•é›ªé´ã€‚
                            </div>
                        </div>
                        <!-- Hotel -->
                        <div class="flex items-start text-xs text-slate-500 bg-slate-50 p-2 rounded border border-slate-100">
                            <span class="material-symbols-outlined text-[16px] mr-1.5 text-indigo-400">hotel</span>
                            <span><strong>ä½å®¿ï¼š</strong>ä¸Šå±±ç”°æº«æ³‰ åœ“å±±èŠ (Kamiyamada Onsen Marusanso)<br>TEL: +81-0262-75-1119</span>
                        </div>
                    </div>
                </div>

                <!-- Day 3 -->
                <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-200 flex flex-col md:flex-row gap-6">
                    <div class="w-full md:w-1/3 illustration-container h-48 md:h-auto relative overflow-hidden group">
                        <img src="Day 3_img.png" class="w-full h-full object-cover transition group-hover:scale-105 duration-700" alt="Day 3 Image" onerror="this.style.opacity='0.5'">
                    </div>
                    <div class="flex-1">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h3 class="font-bold text-xl text-slate-800">Day 3: é«˜å±±ã€åˆæŒæ‘ã€å…¼å…­åœ’ã€é¦™æ—åŠ</h3>
                                <div class="flex gap-2 mt-1">
                                    <span class="badge badge-amber">ä¸–ç•Œéºç”¢</span>
                                    <span class="badge badge-emerald">æ—¥æœ¬ä¸‰å¤§ååœ’</span>
                                </div>
                            </div>
                            <span class="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded font-mono border border-slate-200">12/26</span>
                        </div>
                        <p class="text-sm text-slate-600 mb-4 leading-relaxed">
                            èµ°è¨ªç±³å…¶æ—ä¸‰æ˜Ÿ<span class="font-bold text-slate-800">é«˜å±±ä¸‰ä¹‹ç”ºå¤è¡—</span>(å°äº¬éƒ½)ã€‚åˆå¾Œé€²å…¥ç«¥è©±ä¸–ç•Œ<span class="font-bold text-slate-800">ç™½å·é„‰åˆæŒæ‘</span>ã€‚æ¥è‘—åƒè§€é‡‘æ¾¤<span class="font-bold text-slate-800">å…¼å…­åœ’</span>ï¼Œæ¬£è³å†¬å­£é™å®šã€Œé›ªåŠã€ã€‚æ™šä¸Šè‡ªç”±æ•£ç­–æ–¼<span class="font-bold text-slate-800">é¦™æ—åŠ</span>ï¼Œæ¬£è³å¤¢å¹»è¡—é“å½©ç‡ˆã€‚
                        </p>
                        <!-- Wear -->
                        <div class="bg-sky-50 p-3 rounded-lg text-sm text-sky-800 border border-sky-100 flex gap-3 mb-3">
                            <div class="bg-white p-1.5 rounded-full h-8 w-8 flex items-center justify-center text-lg shadow-sm border border-sky-100">ğŸ§£</div>
                            <div>
                                <strong class="text-sky-700 block text-xs">ç©¿æ­ï¼šæ¥µè‡´ä¿æš–å…¨é…</strong>
                                æˆ¶å¤–æ™‚é–“é•·ä¸”æ¥µå†·ã€‚ç™¼ç†±è¡£ã€æ¯›è¡£ã€ç¾½çµ¨å¤–å¥—ã€æ¯›å¸½ã€åœå·¾ã€æ‰‹å¥—ç¼ºä¸€ä¸å¯ã€‚
                            </div>
                        </div>
                         <!-- Hotel -->
                         <div class="flex items-start text-xs text-slate-500 bg-slate-50 p-2 rounded border border-slate-100">
                            <span class="material-symbols-outlined text-[16px] mr-1.5 text-indigo-400">hotel</span>
                            <span><strong>ä½å®¿ï¼š</strong>Hotel Amanek é‡‘æ¾¤<br>TEL: 076-224-0700</span>
                        </div>
                    </div>
                </div>

                <!-- Day 4 -->
                <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-200 flex flex-col md:flex-row gap-6">
                    <div class="w-full md:w-1/3 illustration-container h-48 md:h-auto relative overflow-hidden group">
                        <img src="Day 4_img.png" class="w-full h-full object-cover transition group-hover:scale-105 duration-700" alt="Day 4 Image" onerror="this.style.opacity='0.5'">
                    </div>
                    <div class="flex-1">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h3 class="font-bold text-xl text-slate-800">Day 4: åº„å·å³½ã€éƒ¡ä¸Šå…«å¹¡ã€é•·è‰¯å·éµé“</h3>
                                <div class="flex gap-2 mt-1">
                                    <span class="badge badge-blue">éŠèˆ¹</span>
                                    <span class="badge badge-amber">éµé“é«”é©—</span>
                                    <span class="badge badge-violet">å¤©ç©ºä¹‹åŸ</span>
                                </div>
                            </div>
                            <span class="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded font-mono border border-slate-200">12/27</span>
                        </div>
                        <p class="text-sm text-slate-600 mb-4 leading-relaxed">
                            æ­ä¹˜<span class="font-bold text-slate-800">åº„å·å³½éŠè¦½èˆ¹</span>æ¬£è³å®›å¦‚æ°´å¢¨ç•«çš„é›ªæ™¯ã€‚æ¥è‘—å‰å¾€<span class="font-bold text-slate-800">éƒ¡ä¸Šå…«å¹¡åŸ</span>(å¤©ç©ºä¹‹åŸ)ï¼Œä¸¦é«”é©—ä¸€æ®µ<span class="font-bold text-slate-800">é•·è‰¯å·éµé“</span>(ç¾æ¿ƒ~éƒ¡ä¸Šå…«å¹¡)ï¼Œæ¬£è³æ²¿é€”æºªè°·é¢¨å…‰ã€‚
                        </p>
                        <!-- Wear -->
                        <div class="bg-slate-50 p-3 rounded-lg text-sm text-slate-600 border border-slate-200 flex gap-3 mb-3">
                            <div class="bg-white p-1.5 rounded-full h-8 w-8 flex items-center justify-center text-lg shadow-sm border border-slate-100">ğŸ§¥</div>
                            <div>
                                <strong class="text-slate-800 block text-xs">ç©¿æ­ï¼šé˜²é¢¨ + æšˆè»Šè—¥</strong>
                                èˆ¹ä¸Šé¢¨å¤§å¸½å­æˆ´å¥½ã€‚æ˜“æšˆè»Šè€…è«‹ææ—©åŠå°æ™‚åƒæšˆè»Šè—¥ (å±±è·¯è¼ƒå¤š)ã€‚
                            </div>
                        </div>
                         <!-- Hotel -->
                         <div class="flex items-start text-xs text-slate-500 bg-slate-50 p-2 rounded border border-slate-100">
                            <span class="material-symbols-outlined text-[16px] mr-1.5 text-indigo-400">hotel</span>
                            <span><strong>ä½å®¿ï¼š</strong>åå¤å±‹ç´å±‹æ©‹ Kuretake Inn (å³ç«¹)<br>TEL: +81-52-561-1211</span>
                        </div>
                    </div>
                </div>

                <!-- Day 5 -->
                <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-200 flex flex-col md:flex-row gap-6">
                    <div class="w-full md:w-1/3 illustration-container h-48 md:h-auto relative overflow-hidden group">
                        <img src="Day 5_img.png" class="w-full h-full object-cover transition group-hover:scale-105 duration-700" alt="Day 5 Image" onerror="this.style.opacity='0.5'">
                    </div>
                    <div class="flex-1">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h3 class="font-bold text-xl text-slate-800">Day 5: åå¤å±‹å¸‚å€ã€è¿”ç¨‹</h3>
                                <div class="flex gap-2 mt-1">
                                    <span class="badge badge-blue">âœˆï¸ CI155 (12:05-14:40)</span>
                                </div>
                            </div>
                            <span class="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded font-mono border border-slate-200">12/28</span>
                        </div>
                        <p class="text-sm text-slate-600 mb-4 leading-relaxed">
                            æ—©æ™¨æ•´ç†è¡Œæï¼Œå‰å¾€ä¸­éƒ¨åœ‹éš›æ©Ÿå ´å…ç¨…åº—æœ€å¾Œæ¡è²·ï¼Œæ­æ©Ÿè¿”å°ã€‚
                        </p>
                        <!-- Wear -->
                        <div class="bg-indigo-50 p-3 rounded-lg text-sm text-indigo-800 border border-indigo-100 flex gap-3 mb-3">
                            <div class="bg-white p-1.5 rounded-full h-8 w-8 flex items-center justify-center text-lg shadow-sm border border-indigo-100">âœˆï¸</div>
                            <div>
                                <strong class="text-indigo-700 block text-xs">ç©¿æ­ï¼šè¼•é¬†æ‰“åŒ…</strong>
                                åšé‡è¡£ç‰©å¯æ‰˜é‹ã€‚èº«ä¸Šç©¿è‘—é©åˆå°ç£å¤©æ°£çš„è¡£ç‰©ã€‚
                            </div>
                        </div>
                        <div class="flex items-start text-xs text-slate-500 bg-slate-50 p-2 rounded border border-slate-100">
                            <span class="material-symbols-outlined text-[16px] mr-1.5 text-indigo-400">home</span>
                            <span><strong>ä½å®¿ï¼š</strong>æº«æš–çš„å®¶</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- TAB 3: MAP (Updated Links) -->
        <div id="content-map" class="tab-content">
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-slate-800">åŒ—é™¸ç²¾è¯æ™¯é»åœ°åœ–</h2>
                    <p class="text-sm text-slate-500 mt-1">é»æ“Šä¸‹æ–¹æŒ‰éˆ•å¯ç›´æ¥é–‹å•Ÿ Google Maps å°èˆª</p>
                </div>
                
                <!-- Map Image Replacement -->
                <div class="relative w-full aspect-[4/3] md:aspect-[2/1] rounded-2xl overflow-hidden mb-6 bg-slate-100 border border-slate-200 shadow-inner group">
                    <img src="map_img.png" class="w-full h-full object-contain" alt="Route Map" onerror="this.style.opacity='0.5'">
                </div>

                <!-- Deep Links Grid -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Hotels (New) -->
                     <a href="https://www.google.com/maps/search/?api=1&query=Tateshina+Resort+Hotel" target="_blank" class="flex items-center p-4 bg-white border border-l-4 border-l-indigo-400 border-slate-200 hover:shadow-md rounded-xl transition group">
                        <span class="w-10 h-10 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center mr-3 group-hover:scale-110 transition">
                            <span class="material-symbols-outlined text-lg">hotel</span>
                        </span>
                        <div>
                            <div class="font-bold text-slate-700 text-sm">è“¼ç§‘ RESORT</div>
                            <div class="text-[10px] text-slate-400">Day 1 ä½å®¿</div>
                        </div>
                        <span class="material-symbols-outlined ml-auto text-slate-300 group-hover:text-indigo-500 text-lg">open_in_new</span>
                    </a>

                    <a href="https://www.google.com/maps/search/?api=1&query=Marusanso+Kamiyamada" target="_blank" class="flex items-center p-4 bg-white border border-l-4 border-l-indigo-400 border-slate-200 hover:shadow-md rounded-xl transition group">
                        <span class="w-10 h-10 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center mr-3 group-hover:scale-110 transition">
                            <span class="material-symbols-outlined text-lg">hotel</span>
                        </span>
                        <div>
                            <div class="font-bold text-slate-700 text-sm">åœ“å±±èŠ</div>
                            <div class="text-[10px] text-slate-400">Day 2 ä½å®¿</div>
                        </div>
                        <span class="material-symbols-outlined ml-auto text-slate-300 group-hover:text-indigo-500 text-lg">open_in_new</span>
                    </a>

                    <a href="https://www.google.com/maps/search/?api=1&query=Hotel+Amanek+Kanazawa" target="_blank" class="flex items-center p-4 bg-white border border-l-4 border-l-indigo-400 border-slate-200 hover:shadow-md rounded-xl transition group">
                        <span class="w-10 h-10 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center mr-3 group-hover:scale-110 transition">
                            <span class="material-symbols-outlined text-lg">hotel</span>
                        </span>
                        <div>
                            <div class="font-bold text-slate-700 text-sm">Amanek é‡‘æ¾¤</div>
                            <div class="text-[10px] text-slate-400">Day 3 ä½å®¿</div>
                        </div>
                        <span class="material-symbols-outlined ml-auto text-slate-300 group-hover:text-indigo-500 text-lg">open_in_new</span>
                    </a>

                    <a href="https://www.google.com/maps/search/?api=1&query=Nagoya+Station" target="_blank" class="flex items-center p-4 bg-slate-50 hover:bg-white border border-slate-200 hover:border-blue-400 rounded-xl transition group">
                        <span class="w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center mr-3 group-hover:scale-110 transition">
                            <span class="material-symbols-outlined text-lg">train</span>
                        </span>
                        <div>
                            <div class="font-bold text-slate-700 text-sm">åå¤å±‹è»Šç«™</div>
                            <div class="text-[10px] text-slate-400">äº¤é€šæ¨ç´</div>
                        </div>
                        <span class="material-symbols-outlined ml-auto text-slate-300 group-hover:text-blue-500 text-lg">open_in_new</span>
                    </a>
                    
                    <a href="https://www.google.com/maps/search/?api=1&query=Magome-juku" target="_blank" class="flex items-center p-4 bg-slate-50 hover:bg-white border border-slate-200 hover:border-amber-400 rounded-xl transition group">
                        <span class="w-10 h-10 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center mr-3 group-hover:scale-110 transition">
                            <span class="material-symbols-outlined text-lg">history</span>
                        </span>
                        <div>
                            <div class="font-bold text-slate-700 text-sm">é¦¬ç± å®¿</div>
                            <div class="text-[10px] text-slate-400">Day 1 æ±Ÿæˆ¶é©›ç«™</div>
                        </div>
                        <span class="material-symbols-outlined ml-auto text-slate-300 group-hover:text-amber-500 text-lg">open_in_new</span>
                    </a>

                    <a href="https://www.google.com/maps/search/?api=1&query=Zenkoji+Temple+Nagano" target="_blank" class="flex items-center p-4 bg-slate-50 hover:bg-white border border-slate-200 hover:border-amber-400 rounded-xl transition group">
                        <span class="w-10 h-10 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center mr-3 group-hover:scale-110 transition">
                            <span class="material-symbols-outlined text-lg">temple_buddhist</span>
                        </span>
                        <div>
                            <div class="font-bold text-slate-700 text-sm">å–„å…‰å¯º</div>
                            <div class="text-[10px] text-slate-400">Day 2 åœ‹å¯¶/ä¸€ç”Ÿå¿…åƒ</div>
                        </div>
                        <span class="material-symbols-outlined ml-auto text-slate-300 group-hover:text-amber-500 text-lg">open_in_new</span>
                    </a>

                    <a href="https://www.google.com/maps/search/?api=1&query=Jigokudani+Monkey+Park" target="_blank" class="flex items-center p-4 bg-slate-50 hover:bg-white border border-slate-200 hover:border-rose-400 rounded-xl transition group">
                        <span class="w-10 h-10 rounded-full bg-rose-100 text-rose-600 flex items-center justify-center mr-3 group-hover:scale-110 transition">
                            <span class="material-symbols-outlined text-lg">pets</span>
                        </span>
                        <div>
                            <div class="font-bold text-slate-700 text-sm">åœ°ç„è°·é‡çŒ¿å…¬è‹‘</div>
                            <div class="text-[10px] text-slate-400">Day 2 é›ªçŒ´æº«æ³‰</div>
                        </div>
                        <span class="material-symbols-outlined ml-auto text-slate-300 group-hover:text-rose-500 text-lg">open_in_new</span>
                    </a>

                    <a href="https://www.google.com/maps/search/?api=1&query=Obuse" target="_blank" class="flex items-center p-4 bg-slate-50 hover:bg-white border border-slate-200 hover:border-rose-400 rounded-xl transition group">
                        <span class="w-10 h-10 rounded-full bg-rose-100 text-rose-600 flex items-center justify-center mr-3 group-hover:scale-110 transition">
                            <span class="material-symbols-outlined text-lg">icecream</span>
                        </span>
                        <div>
                            <div class="font-bold text-slate-700 text-sm">å°å¸ƒæ–½ç”º</div>
                            <div class="text-[10px] text-slate-400">Day 2 æ —å­/åŒ—é½‹é¤¨</div>
                        </div>
                        <span class="material-symbols-outlined ml-auto text-slate-300 group-hover:text-rose-500 text-lg">open_in_new</span>
                    </a>

                    <a href="https://www.google.com/maps/search/?api=1&query=Takayama+Sanmachi+Suji" target="_blank" class="flex items-center p-4 bg-slate-50 hover:bg-white border border-slate-200 hover:border-sky-400 rounded-xl transition group">
                        <span class="w-10 h-10 rounded-full bg-sky-100 text-sky-600 flex items-center justify-center mr-3 group-hover:scale-110 transition">
                            <span class="material-symbols-outlined text-lg">storefront</span>
                        </span>
                        <div>
                            <div class="font-bold text-slate-700 text-sm">é«˜å±±ä¸‰ä¹‹ç”ºå¤è¡—</div>
                            <div class="text-[10px] text-slate-400">Day 3 å°äº¬éƒ½</div>
                        </div>
                        <span class="material-symbols-outlined ml-auto text-slate-300 group-hover:text-sky-500 text-lg">open_in_new</span>
                    </a>

                    <a href="https://www.google.com/maps/search/?api=1&query=Shirakawa-go" target="_blank" class="flex items-center p-4 bg-slate-50 hover:bg-white border border-slate-200 hover:border-sky-400 rounded-xl transition group">
                        <span class="w-10 h-10 rounded-full bg-sky-100 text-sky-600 flex items-center justify-center mr-3 group-hover:scale-110 transition">
                            <span class="material-symbols-outlined text-lg">cottage</span>
                        </span>
                        <div>
                            <div class="font-bold text-slate-700 text-sm">ç™½å·é„‰åˆæŒæ‘</div>
                            <div class="text-[10px] text-slate-400">Day 3 ä¸–ç•Œéºç”¢</div>
                        </div>
                        <span class="material-symbols-outlined ml-auto text-slate-300 group-hover:text-sky-500 text-lg">open_in_new</span>
                    </a>
                    
                    <a href="https://www.google.com/maps/search/?api=1&query=Kenroku-en" target="_blank" class="flex items-center p-4 bg-slate-50 hover:bg-white border border-slate-200 hover:border-emerald-400 rounded-xl transition group">
                        <span class="w-10 h-10 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center mr-3 group-hover:scale-110 transition">
                            <span class="material-symbols-outlined text-lg">park</span>
                        </span>
                        <div>
                            <div class="font-bold text-slate-700 text-sm">é‡‘æ¾¤å…¼å…­åœ’</div>
                            <div class="text-[10px] text-slate-400">Day 3 æ—¥æœ¬ååœ’</div>
                        </div>
                        <span class="material-symbols-outlined ml-auto text-slate-300 group-hover:text-emerald-500 text-lg">open_in_new</span>
                    </a>

                    <a href="https://www.google.com/maps/search/?api=1&query=Korinbo+Kanazawa" target="_blank" class="flex items-center p-4 bg-slate-50 hover:bg-white border border-slate-200 hover:border-emerald-400 rounded-xl transition group">
                        <span class="w-10 h-10 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center mr-3 group-hover:scale-110 transition">
                            <span class="material-symbols-outlined text-lg">light_mode</span>
                        </span>
                        <div>
                            <div class="font-bold text-slate-700 text-sm">é¦™æ—åŠ</div>
                            <div class="text-[10px] text-slate-400">Day 3 å¤¢å¹»é»ç‡ˆ</div>
                        </div>
                        <span class="material-symbols-outlined ml-auto text-slate-300 group-hover:text-emerald-500 text-lg">open_in_new</span>
                    </a>

                    <a href="https://www.google.com/maps/search/?api=1&query=Shogawa+Gorge" target="_blank" class="flex items-center p-4 bg-slate-50 hover:bg-white border border-slate-200 hover:border-violet-400 rounded-xl transition group">
                        <span class="w-10 h-10 rounded-full bg-violet-100 text-violet-600 flex items-center justify-center mr-3 group-hover:scale-110 transition">
                            <span class="material-symbols-outlined text-lg">sailing</span>
                        </span>
                        <div>
                            <div class="font-bold text-slate-700 text-sm">åº„å·å³½éŠèˆ¹</div>
                            <div class="text-[10px] text-slate-400">Day 4 æ°´ä¸Šè³é›ª</div>
                        </div>
                        <span class="material-symbols-outlined ml-auto text-slate-300 group-hover:text-violet-500 text-lg">open_in_new</span>
                    </a>

                    <a href="https://www.google.com/maps/search/?api=1&query=Gujo+Hachiman+Castle" target="_blank" class="flex items-center p-4 bg-slate-50 hover:bg-white border border-slate-200 hover:border-violet-400 rounded-xl transition group">
                        <span class="w-10 h-10 rounded-full bg-violet-100 text-violet-600 flex items-center justify-center mr-3 group-hover:scale-110 transition">
                            <span class="material-symbols-outlined text-lg">castle</span>
                        </span>
                        <div>
                            <div class="font-bold text-slate-700 text-sm">éƒ¡ä¸Šå…«å¹¡åŸ</div>
                            <div class="text-[10px] text-slate-400">Day 4 å¤©ç©ºä¹‹åŸ</div>
                        </div>
                        <span class="material-symbols-outlined ml-auto text-slate-300 group-hover:text-violet-500 text-lg">open_in_new</span>
                    </a>
                </div>
            </div>
        </div>

    </main>

    <script>
        // --- 1. Checklist Data ---
        const checklistData = {
            carry: [
                {id: "c_passport", text: "è­·ç…§ (æ•ˆæœŸ>6å€‹æœˆ)", sub: "å»ºè­°å¤šå¸¶ä¸€ä»½å½±æœ¬", highlight: true, icon: "menu_book"},
                {id: "c_lighter", text: "æ‰“ç«æ©Ÿ (é™1å€‹)", sub: "å¿…é ˆéš¨èº«ï¼åš´ç¦æ‰˜é‹", highlight: true, icon: "local_fire_department"},
                {id: "c_mask", text: "å£ç½© (å‚™ç”¨)", sub: "é˜²ç–«èˆ‡ä¿æš–", icon: "masks"},
                {id: "c_sanitizer", text: "ä¹¾æ´—æ‰‹ (<100ml)", sub: "é˜²ç–«å¿…å‚™ï¼Œæ³¨æ„å®¹é‡", icon: "sanitizer"},
                {id: "c_lipbalm", text: "è­·å”‡è†", sub: "æ—¥æœ¬ä¹¾ç‡¥å¿…å‚™", icon: "face"},
                {id: "c_thermos", text: "ä¿æº«ç“¶", sub: "å®‰æª¢å‰éœ€å€’ç©º", icon: "water_bottle"},
                {id: "c_cash", text: "æ—¥å¹£ç¾é‡‘", sub: "ç´„Â¥3-5è¬ï¼Œåˆ†é–‹æ”¾", icon: "payments"},
                {id: "c_tip", text: "å°éŠé ˜éšŠå°è²»", sub: "å°å¹£ç¾é‡‘ $1500 (æ”¾éŒ¢åŒ…)", highlight: false, icon: "attach_money"},
                {id: "c_card", text: "ä¿¡ç”¨å¡ (JCB/Visa)", sub: "JCBåœ¨æ—¥æœ¬å¥½ç”¨", icon: "credit_card"},
                {id: "c_power", text: "è¡Œå‹•é›»æº (å¿…å‚™)", sub: "åš´ç¦æ‰˜é‹ï¼å»ºè­°å¸¶2é¡†", highlight: true, icon: "battery_charging_full"},
                {id: "c_bt", text: "è—ç‰™è€³æ©Ÿ", sub: "å……é›»ç›’å«é‹°é›»æ± ï¼Œå‹™å¿…éš¨èº«", highlight: true, icon: "headphones"},
                {id: "c_esim", text: "eSIM QR Code", sub: "æˆªåœ–å­˜æ‰‹æ©Ÿç›¸ç°¿", icon: "qr_code"},
                {id: "c_wifi", text: "æ‰‹æ©Ÿ/ç¿»è­¯App", sub: "é å…ˆä¸‹è¼‰åœ°åœ–", icon: "smartphone"},
                {id: "c_pen", text: "åŸå­ç­† (1æ”¯)", sub: "æ©Ÿä¸Šå¡«è¡¨ç”¨", icon: "edit"},
                {id: "c_warm", text: "è–„å¤–å¥—/åœå·¾", sub: "æ©Ÿä¸Š/æ©Ÿå ´èª¿æº«"}
            ],
            checked: [
                {id: "k_bag", text: "è³¼ç‰©è¢‹ (æ‘ºç–Š)", sub: "è£æˆ°åˆ©å“æˆ–é«’è¡£ç‰©", icon: "shopping_bag"},
                {id: "k_cigs", text: "é¦™è¸", sub: "æ³¨æ„å…¥å¢ƒè¦å®š (é™1æ¢)", icon: "smoking_rooms"},
                {id: "k_charger", text: "æ‰‹æ©Ÿ/æ‰‹éŒ¶å……é›»å™¨", sub: "ç·šæèˆ‡æ’é ­ (ç„¡é›»æ± )", icon: "electrical_services"},
                {id: "k_jacket", text: "é˜²é¢¨ç¾½çµ¨å¤–å¥— (å¿…å‚™)", sub: "è‹¥ç©¿ä¸ä¸‹è«‹æ”¾è¡Œæç®±", highlight: true, icon: "checkroom"},
                {id: "k_accessories", text: "ä¿æš–ä¸‰å¯¶", sub: "æ¯›å¸½(è“‹è€³)/åœå·¾/é˜²æ°´æ‰‹å¥—", highlight: true, icon: "snowing"},
                {id: "k_inner", text: "ç™¼ç†±è¡£ (Heattech)", sub: "3-4ä»¶ï¼Œè²¼èº«ç©¿", icon: "laundry"},
                {id: "k_top", text: "æ¯›è¡£/åˆ·æ¯›ä¸Šè¡£", sub: "3ä»¶ï¼Œä¸­å±¤ä¿æš–", icon: "dry_cleaning"},
                {id: "k_pants", text: "ä¿æš–é•·è¤²/åˆ·æ¯›è¤²", sub: "3ä»¶", icon: "checkroom"},
                {id: "k_underwear", text: "å…æ´—å…§è¤²/è¥ªå­", sub: "5å¤©ä»½ï¼Œè¥ªå­è¦åš", icon: "checkroom"},
                {id: "k_toilet", text: "ç›¥æ´—ç”¨å“", sub: "ç‰™åˆ·/ç‰™è†/æ´—é¢ä¹³", icon: "toothbrush"},
                {id: "k_lotion", text: "ä¿æ¿•ç”¨å“ (ä¹³æ¶²)", sub: "æ—¥æœ¬æ¥µä¹¾ï¼Œå¿…å‚™", highlight: true, icon: "face"},
                {id: "k_liquid", text: "æ¶²é«”é¡ (>100ml)", sub: "åŒ–å¦æ°´/æœå‡/å¸ƒä¸", highlight: true, icon: "water_drop"},
                {id: "k_tool", text: "ä¿®å®¹çµ„ (åˆ€å‰ª)", sub: "æŒ‡ç”²åˆ€/å‰ªåˆ€å‹™å¿…æ‰˜é‹", icon: "content_cut"},
                {id: "k_umb", text: "æ‘ºç–Šå‚˜", sub: "é˜²æ¿•é›ª/é›¨", icon: "umbrella"},
                {id: "k_supp", text: "ä¿å¥é£Ÿå“", sub: "ç¶­ä»–å‘½ç­‰ (å»ºè­°åŸåŒ…è£)", icon: "pill"}
            ],
            meds: [
                {id: "m_chronic", text: "æ…¢æ€§è™•æ–¹ç±¤è—¥å“", sub: "å¸¶è¶³é‡+å‚™ç”¨3å¤© (å»ºè­°éš¨èº«å¸¶ä¸€ä»½è­‰æ˜)", highlight: true},
                {id: "m_cold", text: "ç¶œåˆæ„Ÿå†’è—¥", sub: "ä¼å†’/ç™¾ä¿èƒ½"},
                {id: "m_pain", text: "æ­¢ç—›é€€ç‡’è—¥", sub: "EVE/æ™®æ‹¿ç–¼"},
                {id: "m_stomach", text: "è…¸èƒƒè—¥", sub: "è‹¥å…ƒéŒ /èƒƒæ•£"},
                {id: "m_car", text: "æšˆè»Šè—¥", sub: "å±±è·¯å¤šå¿…å‚™", highlight: true}
            ]
        };

        // --- 2. Render Checklists ---
        function renderList(containerId, items) {
            const container = document.getElementById(containerId);
            container.innerHTML = items.map(item => `
                <div class="checklist-item flex items-start p-2.5 rounded-lg cursor-pointer mb-1 select-none group border border-transparent"
                     id="${item.id}" onclick="toggleCheck('${item.id}')">
                    <div class="check-box w-5 h-5 rounded-md border-2 border-slate-300 mr-3 flex items-center justify-center bg-white transition-all flex-shrink-0 mt-0.5 relative shadow-sm">
                        <span class="material-symbols-outlined check-icon text-[14px] text-white opacity-0 transition-all font-bold">check</span>
                    </div>
                    <div>
                        <div class="flex items-center">
                            <span class="text-sm font-bold text-slate-700 item-text ${item.highlight ? 'text-rose-600' : ''}">${item.text}</span>
                            ${item.icon ? `<span class="material-symbols-outlined text-[16px] ml-1.5 text-slate-400 group-hover:text-slate-500 transition">${item.icon}</span>` : ''}
                        </div>
                        <p class="text-[11px] text-slate-400 item-text mt-0.5 leading-tight">${item.sub}</p>
                    </div>
                </div>
            `).join('');
        }

        renderList('list-carry', checklistData.carry);
        renderList('list-checked', checklistData.checked);
        renderList('list-meds', checklistData.meds);

        // --- 3. Interaction Logic ---
        function toggleCheck(id) {
            const el = document.getElementById(id);
            if(el) {
                el.classList.toggle('checked');
                if(el.classList.contains('checked')){
                    el.setAttribute('data-checked', 'true');
                } else {
                    el.removeAttribute('data-checked');
                }
            }
        }

        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById(`content-${tabId}`).classList.add('active');
            
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.className = "tab-btn flex-1 py-3 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition text-slate-500 hover:bg-slate-50";
            });
            const activeDesktop = document.getElementById(`tab-${tabId}`);
            if(activeDesktop) activeDesktop.className = "tab-btn flex-1 py-3 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition bg-sky-50 text-sky-600 shadow-sm ring-1 ring-slate-200";

            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.className = "nav-btn flex flex-col items-center text-slate-400 w-full";
            });
            const activeMobile = document.getElementById(`nav-${tabId}`);
            if(activeMobile) activeMobile.className = "nav-btn flex flex-col items-center text-sky-600 w-full";
            
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        // --- 4. Export Function ---
        function downloadPage() {
            const clone = document.documentElement.cloneNode(true);
            const checkedItems = document.querySelectorAll('.checklist-item.checked');
            checkedItems.forEach(item => {
                const cloneItem = clone.querySelector(`#${item.id}`);
                if(cloneItem) {
                    cloneItem.classList.add('checked');
                    const box = cloneItem.querySelector('.check-box');
                    if(box) {
                        box.style.backgroundColor = '#0ea5e9';
                        box.style.borderColor = '#0ea5e9';
                    }
                    const icon = cloneItem.querySelector('.check-icon');
                    if(icon) {
                        icon.style.opacity = '1';
                        icon.style.transform = 'scale(1)';
                    }
                    const texts = cloneItem.querySelectorAll('.item-text');
                    texts.forEach(t => {
                        t.style.textDecoration = 'line-through';
                        t.style.color = '#94a3b8';
                    });
                }
            });

            const exportBtns = clone.querySelectorAll('[onclick="downloadPage()"]');
            exportBtns.forEach(btn => btn.style.display = 'none');

            const htmlContent = `<!DOCTYPE html>\n` + clone.outerHTML;
            const blob = new Blob([htmlContent], {type: 'text/html'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            const date = new Date().toISOString().split('T')[0];
            a.download = `Japan_Trip_Planner_v5_${date}.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
